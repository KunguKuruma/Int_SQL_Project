# Intermediate SQL  - Sales Analysis

## Overview

The following analysis is conducted to understand customer behavior, customer retention, and the customer life-time value in an e-commerce company. Consequently, the insights derived are to be used to improve business revenues and customer metrics. 

## Business Questions

1. **Customer Segmentation:** Who are the business' most valuable customers?

2. **Cohort Analysis:** How do different customer groups generate revenue?

3. **Customer Retention Analysis:** Which customers haven't purchased recently?

## Analysis Approach

## 1. Customer Segmentation Analysis 

- In this analysis, customers are segmented based on total lifetime value (LTV) where they are palced into 3 distinct categories:

    a) High_value Customers

    b) Mid_value Customers

    c) Low-value Customers
- Revenues are used as the key metric for this analysis. 


Query: [1_customer_segmentation.sql](/1_customer_segmentation.sql)


**Visualization**
![1_customer_segmentation](/images/1_customer_segmentation.png)



**Key Findings**
- High-Value customers(25% of customers) are the primary driver of the business as they account for about 65.6% of revenues($135.4M). 
- Mid-value customers(50% of customers) generate 32% of the total revenues ($66.6M)
- Low-value customers(25% of customers) contribute marginally to the overall revenue generation in the business($4.3M). 

**Business Insights**
- As two-thirds of revenue is generated by high-value customers, it's important to establish retention programs for them to remain customers e.g. loyalty programs. 

- The mid-value customers contribute substantially to the business, and therefore a clear upselling and cross-selling strategy should be adopted to move them to the high-value customers category. 
- Considering the low-revenue generated by customers in the low-value segment, the cost of acquistion for this segment should be probed to determine if the cost of marketing to them is more than the revenue they contribute. If that's the case, more cheaper marketing strategies should be adopted. 

- More product and marketing resources should be aimed at the high and mid-value segment customers as small growths have the potential of increasing revenues for the business. 

- Price-sensitive promotions can also be promoted to low-value customers to encourage more frequent purchases from them. 


## 2. Cohort Analysis 

- In this analysis, revenue and customer count per cohorts was tracked. The cohorts were grouped by the first year of purchase by customers.  
- Customer retention was subsequently analyzed from a cohort-basis. 

Query: [2_cohort_analysis.sql](/2_cohort_analysis.sql)


**Visualization**
![Cohort Analysis](/images/2_cohort_analysis.png)

**Key Findings**
- Revenue per customer shows a decresing trend over time.
- 2022 -2024 cohorts are consistently performing worse than earlier cohorts. 
- Although, net revenue is increasing, which is likely because of a larger customer base, it's not indcative of customer value. 

**Business Insights**
- Value extrcted from customers is decreasing over time and needs further investigation. 
- From 2020 - 2024, there was a drop in average customer revenue acquired which is concerning. 
- With both lowering life-time value and decreasing customer acquisition, the company is facing a potential decline in revenue. 

## 3. Customer Retention Analysis

- This analysis was primarily conducted to determine the customers at risk of churning. 
- To perform it, their last purchase patterns were analyzed and customer specifif metrics were determined. 

Query: [3_retention_analysis.sql](/3_retention_analysis.sql)


**Visualizations**

![3_retention_analysis](/images/3_customer_retention_2.png)

![3_retention_analysis](/images/3_customer_retention.png)

**Key Findings**

- Approximately 90.5% of customers are churned while only 9.5% are active customers. 
- Churned customers siginificantly outnumber active customers in each cohort year. 
- Despite acquisition of more customers over subsequent years, retention ratios remain weak. 

**Business Insights**
- The business emphasis has been put more on customer acquisition than customer retention. Therefore, more strategies should be put in place to retain customers. 
- It is alos evident that customer lifetimes within the business are short suggesting that marketing expenses may be inefficient. 
- The persistent churn points to issues within the business such as price misalignment, product quality, and potentially weak customer support and engagement. 
- The retention over time isn't improving despite an increase in customer base, suggesting limited use of customer analytics tools in decision making processes. 


## Strategic Recommendations
 
 - Given that high-value customers drive the most revenues for the business, dedicated customer success managers should be assigned to them. Further, they should be accorded priority support, personalized pricing and product bundles, and loyalty benefits.

 - Upgrade mid - value customers to high-value customers by upselling products to them, and offering them loyalty thresholds that unlock premium benefits. 

- Moreover, as low-value customers provide minimum returns, the customer acquisition cost should be reduced in this segment, and also support for this segment should be automated. 

- Price sensitive promotions should also be done for low-value customers in order to increase their purchase frequency. 

- Onboarding incentives and loyalty rewards should be offered to 1-2 year customers to strengthen engagement with them. 

- For high-value customers that were churned, win-back campaigns should be targeted towards them. 

- A predictive revenue and churn intelligence should be developed to predict churn, and trigger automated interventions before churn occurs. 

## Technical Details
- **Database:** PostgreSQL
- **Analysis Tools:** PostgreSQL, DBeaver
- **Visualization:** Gemini & ChatGPT